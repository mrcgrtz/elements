{"version":3,"file":"chat-stories-index-stories.79adf215.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;;;AAyCA;;;;;;;;;;;;AAcA;;AAEA;;;;;AAKA;AACA;;;;;;;;;;AAYA;;;;AAMA;AACA;;;;AAMA;;;AAKA;;;;AAIA;;AAEA;;;;;AAOA","sources":["webpack://@mrcgrtz/elements/./src/chat/index.tsx"],"sourcesContent":["/**\n * Chat Component\n * @author Marc GÃ¶rtz <https://marcgoertz.de/>\n */\n\nimport React, {StrictMode} from 'react';\nimport {styled} from 'styled-components';\nimport {format, formatRelative} from 'date-fns';\nimport {isoDate} from '../constants/date-formats';\n\ntype Properties = {\n  readonly history?: Array<{\n    content: string;\n    name?: string;\n    timestamp?: Date;\n    isMe?: boolean;\n    isEmoji?: boolean;\n    isAction?: boolean;\n  }>;\n};\n\nconst List = styled.ol`\n  display: flex;\n  flex-direction: column;\n  padding: 0;\n  list-style: none;\n  font-family:\n    system-ui,\n    -apple-system,\n    BlinkMacSystemFont,\n    'Segoe UI',\n    Roboto,\n    Helvetica,\n    Arial,\n    sans-serif,\n    'Apple Color Emoji',\n    'Segoe UI Emoji',\n    'Segoe UI Symbol';\n  line-height: 1.25;\n`;\n\nconst Action = styled.li`\n  align-self: center;\n  margin: 0.5rem 0;\n  text-align: center;\n  max-inline-size: 80%;\n  font-size: 0.75rem;\n  font-weight: bold;\n  color: gray;\n\n  & i {\n    font-style: normal;\n  }\n`;\n\nconst Bubble = styled.li<{$isMe: boolean}>`\n  position: relative;\n  align-self: ${(p) => (p.$isMe ? 'flex-end' : 'flex-start')};\n  padding: 0.5rem;\n  border-radius: 0.75rem;\n  outline: 0;\n  max-inline-size: 60%;\n  color: ${(p) => (p.$isMe ? 'white' : 'black')};\n  background-color: ${(p) => (p.$isMe ? 'dodgerblue' : 'gainsboro')};\n  box-sizing: border-box;\n\n  & + li {\n    margin-block-start: 0.5rem;\n  }\n\n  &:active time {\n    display: block;\n  }\n`;\n\nconst EmojiBubble = styled(Bubble)`\n  padding: 0;\n  font-size: 4em;\n  background-color: transparent;\n`;\n\nconst Name = styled.span<{hidden?: boolean}>`\n  display: ${(p) => (p.hidden ? 'none' : 'block')};\n  margin-block-end: 0.25em;\n  font-size: 0.75rem;\n  font-weight: bold;\n`;\n\nconst Quote = styled.q`\n  display: block;\n  quotes: none;\n`;\n\nconst Time = styled.time<{$isMe: boolean}>`\n  display: none;\n  position: absolute;\n  inset-block-start: 100%;\n  inset-inline: ${(p) => (p.$isMe ? 'auto 0.666667em' : '0.666667em auto')};\n  margin-block-start: 0.25em;\n  text-align: ${(p) => (p.$isMe ? 'end' : 'start')};\n  font-size: 0.75rem;\n  color: gray;\n  opacity: 0.75;\n  white-space: nowrap;\n`;\n\nconst Chat = ({history}: Properties) => {\n  if (!history || history.length === 0) {\n    return null;\n  }\n\n  return (\n    <StrictMode>\n      <List>\n        {history.map(\n          ({\n            content,\n            name,\n            timestamp,\n            isEmoji = false,\n            isMe = false,\n            isAction = false,\n          }) => {\n            if (isAction) {\n              return <Action key={content}>{content}</Action>;\n            }\n\n            if (isEmoji) {\n              return (\n                <EmojiBubble\n                  key={content}\n                  $isMe={isMe}\n                  tabIndex={timestamp ? 0 : undefined}\n                >\n                  {name && <Name hidden>{name}</Name>}\n                  <Quote>{content}</Quote>\n                  {timestamp && (\n                    <Time $isMe={isMe} dateTime={format(timestamp, isoDate)}>\n                      {formatRelative(timestamp, new Date())}\n                    </Time>\n                  )}\n                </EmojiBubble>\n              );\n            }\n\n            return (\n              <Bubble\n                key={content}\n                $isMe={isMe}\n                tabIndex={timestamp ? 0 : undefined}\n              >\n                {name && <Name>{name}</Name>}\n                <Quote>{content}</Quote>\n                {timestamp && (\n                  <Time $isMe={isMe} dateTime={format(timestamp, isoDate)}>\n                    {formatRelative(timestamp, new Date())}\n                  </Time>\n                )}\n              </Bubble>\n            );\n          }\n        )}\n      </List>\n    </StrictMode>\n  );\n};\n\nChat.defaultProps = {\n  history: [],\n};\n\nexport default Chat;\n"],"names":[],"sourceRoot":""}